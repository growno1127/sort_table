/*! Sortable 0.7.2 - MIT | git://github.com/rubaxa/Sortable.git */
!function(a){"use strict";"function"==typeof define&&define.amd?define(a):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=a():"undefined"!=typeof Package?Sortable=a():window.Sortable=a()}(function(){"use strict";function a(a,c){this.el=a,this.options=c=c||{};var d={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:a.children[0]&&a.children[0].nodeName||(/[uo]l/i.test(a.nodeName)?"li":"*"),ghostClass:"sortable-ghost",ignore:"a, img",filter:null,animation:0,setData:function(a,b){a.setData("Text",b.textContent)}};for(var f in d)!(f in c)&&(c[f]=d[f]);c.group.name||(c.group={name:c.group}),["pull","put"].forEach(function(a){a in c.group||(c.group[a]=!0)}),J.forEach(function(d){c[d]=b(this,c[d]||K),e(a,d.substr(2).toLowerCase(),c[d])},this),a[C]=c.group.name;for(var g in this)"_"===g.charAt(0)&&(this[g]=b(this,this[g]));e(a,"mousedown",this._onTapStart),e(a,"touchstart",this._onTapStart),G&&e(a,"selectstart",this._onTapStart),e(a,"dragover",this._onDragOver),e(a,"dragenter",this._onDragOver),N.push(this._onDragOver),c.store&&this.sort(c.store.get(this))}function b(a,b){var c=M.call(arguments,2);return b.bind?b.bind.apply(b,[a].concat(c)):function(){return b.apply(a,c.concat(M.call(arguments)))}}function c(a,b,c){if("*"===b)return a;if(a){c=c||E,b=b.split(".");var d=b.shift().toUpperCase(),e=new RegExp("\\s("+b.join("|")+")\\s","g");do if(!(""!==d&&a.nodeName!=d||b.length&&((" "+a.className+" ").match(e)||[]).length!=b.length))return a;while(a!==c&&(a=a.parentNode))}return null}function d(a){a.dataTransfer.dropEffect="move",a.preventDefault()}function e(a,b,c){a.addEventListener(b,c,!1)}function f(a,b,c){a.removeEventListener(b,c,!1)}function g(a,b,c){if(a)if(a.classList)a.classList[c?"add":"remove"](b);else{var d=(" "+a.className+" ").replace(/\s+/g," ").replace(" "+b+" ","");a.className=d+(c?" "+b:"")}}function h(a,b,c){var d=a&&a.style;if(d){if(void 0===c)return E.defaultView&&E.defaultView.getComputedStyle?c=E.defaultView.getComputedStyle(a,""):a.currentStyle&&(c=a.currentStyle),void 0===b?c:c[b];b in d||(b="-webkit-"+b),d[b]=c+("string"==typeof c?"":"px")}}function i(a,b,c){if(a){var d=a.getElementsByTagName(b),e=0,f=d.length;if(c)for(;f>e;e++)c(d[e],e);return d}return[]}function j(a){a.draggable=!1}function k(){H=!1}function l(a,b){var c=a.lastElementChild,d=c.getBoundingClientRect();return b.clientY-(d.top+d.height)>5&&c}function m(a){for(var b=a.tagName+a.className+a.src+a.href+a.textContent,c=b.length,d=0;c--;)d+=b.charCodeAt(c);return d.toString(36)}function n(a){for(var b=0;a&&(a=a.previousElementSibling);)b++;return b}function o(a,b){var c,d;return function(){void 0===c&&(c=arguments,d=this,setTimeout(function(){1===c.length?a.call(d,c[0]):a.apply(d,c),c=void 0},b))}}var p,q,r,s,t,u,v,w,x,y,z,A,B={},C="Sortable"+(new Date).getTime(),D=window,E=D.document,F=D.parseInt,G=!!E.createElement("div").dragDrop,H=!1,I=function(a,b,c,d,e,f){var g=E.createEvent("Event");g.initEvent(b,!0,!0),g.item=c||a,g.from=d||a,g.oldIndex=e,g.newIndex=f,a.dispatchEvent(g)},J="onAdd onUpdate onRemove onStart onEnd onFilter onSort".split(" "),K=function(){},L=Math.abs,M=[].slice,N=[];return a.prototype={constructor:a,_applyEffects:function(){g(p,this.options.ghostClass,!0)},_onTapStart:function(a){var b=a.touches&&a.touches[0],d=(b||a).target,f=d,g=this.options,k=this.el,l=g.filter;if(!("mousedown"===a.type&&0!==a.button||g.disabled)){if(g.handle&&(d=c(d,g.handle,k)),d=c(d,g.draggable,k),q=n(d),"function"==typeof l){if(l.call(this,a,d,this))return I(f,"filter",d,k,q),void 0}else if(l&&(l=l.split(",").some(function(a){return a=c(f,a.trim(),k),a?(I(a,"filter",d,k,q),!0):void 0}),l.length))return;if(d&&"selectstart"==a.type&&"A"!=d.tagName&&"IMG"!=d.tagName&&d.dragDrop(),d&&!p&&d.parentNode===k){z=a,t=this.el,p=d,v=p.nextSibling,y=this.options.group,p.draggable=!0,g.ignore.split(",").forEach(function(a){i(d,a.trim(),j)}),b&&(z={target:d,clientX:b.clientX,clientY:b.clientY},this._onDragStart(z,!0),a.preventDefault()),e(E,"mouseup",this._onDrop),e(E,"touchend",this._onDrop),e(E,"touchcancel",this._onDrop),e(t,"dragstart",this._onDragStart),e(t,"dragend",this._onDrop),e(E,"dragover",this);try{E.selection?E.selection.empty():window.getSelection().removeAllRanges()}catch(m){}I(t,"start",p,t,q),"clone"==y.pull&&(s=p.cloneNode(!0),h(s,"display","none"),t.insertBefore(s,p))}}},_emulateDragOver:function(){if(A){h(r,"display","none");var a=E.elementFromPoint(A.clientX,A.clientY),b=a,c=this.options.group.name,d=N.length;if(b)do{if(b[C]===c){for(;d--;)N[d]({clientX:A.clientX,clientY:A.clientY,target:a,rootEl:b});break}a=b}while(b=b.parentNode);h(r,"display","")}},_onTouchMove:function(a){if(z){var b=a.touches[0],c=b.clientX-z.clientX,d=b.clientY-z.clientY,e="translate3d("+c+"px,"+d+"px,0)";A=b,h(r,"webkitTransform",e),h(r,"mozTransform",e),h(r,"msTransform",e),h(r,"transform",e),this._onDrag(b),a.preventDefault()}},_onDragStart:function(a,b){var c=a.dataTransfer,d=this.options;if(this._offUpEvents(),b){var f,g=p.getBoundingClientRect(),i=h(p);r=p.cloneNode(!0),h(r,"top",g.top-F(i.marginTop,10)),h(r,"left",g.left-F(i.marginLeft,10)),h(r,"width",g.width),h(r,"height",g.height),h(r,"opacity","0.8"),h(r,"position","fixed"),h(r,"zIndex","100000"),t.appendChild(r),f=r.getBoundingClientRect(),h(r,"width",2*g.width-f.width),h(r,"height",2*g.height-f.height),e(E,"touchmove",this._onTouchMove),e(E,"touchend",this._onDrop),e(E,"touchcancel",this._onDrop),this._loopId=setInterval(this._emulateDragOver,150)}else c.effectAllowed="move",d.setData&&d.setData.call(this,c,p),e(E,"drop",this);if(setTimeout(this._applyEffects,0),u=d.scroll,u===!0){u=t;do if(u.offsetWidth<u.scrollWidth||u.offsetHeight<u.scrollHeight)break;while(u=u.parentNode)}},_onDrag:o(function(a){if(t&&this.options.scroll){var b,c,d=this.options,e=d.scrollSensitivity,f=d.scrollSpeed,g=a.clientX,h=a.clientY,i=window.innerWidth,j=window.innerHeight,k=(e>=i-g)-(e>=g),l=(e>=j-h)-(e>=h);k||l?b=D:u&&(b=u,c=u.getBoundingClientRect(),k=(L(c.right-g)<=e)-(L(c.left-g)<=e),l=(L(c.bottom-h)<=e)-(L(c.top-h)<=e)),(B.vx!==k||B.vy!==l||B.el!==b)&&(B.el=b,B.vx=k,B.vy=l,clearInterval(B.pid),b&&(B.pid=setInterval(function(){b===D?D.scrollTo(D.scrollX+k*f,D.scrollY+l*f):(l&&(b.scrollTop+=l*f),k&&(b.scrollLeft+=k*f))},24)))}},30),_onDragOver:function(a){var b,d,e,f=this.el,g=this.options,i=g.group,j=i.put,m=y===i,n=g.sort;if(!H&&(m?n||(e=!t.contains(p)):y.pull&&j&&(y.name===i.name||j.indexOf&&~j.indexOf(y.name)))&&(void 0===a.rootEl||a.rootEl===this.el)){if(b=c(a.target,g.draggable,f),d=p.getBoundingClientRect(),s&&s.state!==m&&(h(s,"display",m?"none":""),!m&&s.state&&t.insertBefore(s,p),s.state=m),e)return s||v?t.insertBefore(p,s||v):n||t.appendChild(p),void 0;if(0===f.children.length||f.children[0]===r||f===a.target&&(b=l(f,a))){if(b){if(b.animated)return;q=b.getBoundingClientRect()}f.appendChild(p),this._animate(d,p),b&&this._animate(q,b)}else if(b&&!b.animated&&b!==p&&void 0!==b.parentNode[C]){w!==b&&(w=b,x=h(b));var o,q=b.getBoundingClientRect(),u=q.right-q.left,z=q.bottom-q.top,A=/left|right|inline/.test(x.cssFloat+x.display),B=b.offsetWidth>p.offsetWidth,D=b.offsetHeight>p.offsetHeight,E=(A?(a.clientX-q.left)/u:(a.clientY-q.top)/z)>.5,F=b.nextElementSibling;H=!0,setTimeout(k,30),o=A?b.previousElementSibling===p&&!B||E&&B:F!==p&&!D||E&&D,o&&!F?f.appendChild(p):b.parentNode.insertBefore(p,o?F:b),this._animate(d,p),this._animate(q,b)}}},_animate:function(a,b){var c=this.options.animation;if(c){var d=b.getBoundingClientRect();h(b,"transition","none"),h(b,"transform","translate3d("+(a.left-d.left)+"px,"+(a.top-d.top)+"px,0)"),b.offsetWidth,h(b,"transition","all "+c+"ms"),h(b,"transform","translate3d(0,0,0)"),clearTimeout(b.animated),b.animated=setTimeout(function(){h(b,"transition",""),b.animated=!1},c)}},_offUpEvents:function(){f(E,"mouseup",this._onDrop),f(E,"touchmove",this._onTouchMove),f(E,"touchend",this._onDrop),f(E,"touchcancel",this._onDrop)},_onDrop:function(a){var b=this.el;if(clearInterval(this._loopId),clearInterval(B.pid),f(E,"drop",this),f(E,"dragover",this),f(b,"dragend",this._onDrop),f(b,"dragstart",this._onDragStart),this._offUpEvents(),a){if(a.preventDefault(),a.stopPropagation(),r&&r.parentNode.removeChild(r),p){var c=n(p);j(p),g(p,this.options.ghostClass,!1),t.contains(p)?p.nextSibling!==v&&(I(t,"update",p,t,q,c),I(t,"sort",p,t,q,c),s&&s.parentNode.removeChild(s)):(I(p.parentNode,"sort",p,t,q,c),I(t,"sort",p,t,q,c),I(p,"add",p,t,q,c),I(t,"remove",p,t,q,c)),I(t,"end",p,t,q,c)}t=p=r=v=s=z=A=w=x=y=null,this.options.store&&this.options.store.set(this)}},handleEvent:function(a){var b=a.type;"dragover"===b?(this._onDrag(a),d(a)):"drop"===b&&this._onDrop(a)},toArray:function(){for(var a,b=[],d=this.el.children,e=0,f=d.length;f>e;e++)a=d[e],c(a,this.options.draggable,this.el)&&b.push(a.getAttribute("data-id")||m(a));return b},sort:function(a){var b={},d=this.el;this.toArray().forEach(function(a,e){var f=d.children[e];c(f,this.options.draggable,d)&&(b[a]=f)},this),a.forEach(function(a){b[a]&&(d.removeChild(b[a]),d.appendChild(b[a]))})},closest:function(a,b){return c(a,b||this.options.draggable,this.el)},option:function(a,b){var c=this.options;return void 0===b?c[a]:(c[a]=b,void 0)},destroy:function(){var a=this.el,b=this.options;J.forEach(function(c){f(a,c.substr(2).toLowerCase(),b[c])}),f(a,"mousedown",this._onTapStart),f(a,"touchstart",this._onTapStart),f(a,"selectstart",this._onTapStart),f(a,"dragover",this._onDragOver),f(a,"dragenter",this._onDragOver),Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(a){a.removeAttribute("draggable")}),N.splice(N.indexOf(this._onDragOver),1),this._onDrop(),this.el=null}},a.utils={on:e,off:f,css:h,find:i,bind:b,is:function(a,b){return!!c(a,b,a)},throttle:o,closest:c,toggleClass:g,dispatchEvent:I,index:n},a.version="0.7.2",a.create=function(b,c){return new a(b,c)},a});